(function(_0x1a1c26,_0x2c9401){var _0x58db85=a0_0x4d5a,_0x1e333f=_0x1a1c26();while(!![]){try{var _0x56d493=parseInt(_0x58db85(0x1e0))/0x1*(-parseInt(_0x58db85(0x1fd))/0x2)+-parseInt(_0x58db85(0x1ef))/0x3*(parseInt(_0x58db85(0x1c2))/0x4)+-parseInt(_0x58db85(0x1dd))/0x5*(-parseInt(_0x58db85(0x20f))/0x6)+-parseInt(_0x58db85(0x1f5))/0x7*(-parseInt(_0x58db85(0x1e9))/0x8)+-parseInt(_0x58db85(0x1f6))/0x9+parseInt(_0x58db85(0x1bb))/0xa+parseInt(_0x58db85(0x1e1))/0xb;if(_0x56d493===_0x2c9401)break;else _0x1e333f['push'](_0x1e333f['shift']());}catch(_0x2411b9){_0x1e333f['push'](_0x1e333f['shift']());}}}(a0_0xf26f,0x78ab5));var itemid='';$(document)['ready'](function(){var _0x30b42f=a0_0x4d5a;$(_0x30b42f(0x1be))['click'](function(){FindDuplicate();});});function FindDuplicate(){var _0x5b16f0=a0_0x4d5a,_0xdabaa7=titanForWork['getQueryStringParameter']('CompanySiteUrl'),_0x333ab2=![],_0x699e62=$(_0x5b16f0(0x20e))[_0x5b16f0(0x209)](),_0x34d1a6=$(_0x5b16f0(0x1f3))[_0x5b16f0(0x209)](),_0x3d2fca=$(_0x5b16f0(0x200))['val']();if(_0x699e62[_0x5b16f0(0x214)]()['length']==0x0||_0x34d1a6['trim']()[_0x5b16f0(0x20a)]==0x0)return alert(_0x5b16f0(0x1bd)),![];var _0x19522f=_0xdabaa7+_0x5b16f0(0x1e6)+_0x699e62+_0x5b16f0(0x1f9)+_0x34d1a6+_0x5b16f0(0x1f8);return itemid!=null&&(_0x19522f=_0xdabaa7+_0x5b16f0(0x1e6)+_0x699e62+_0x5b16f0(0x1f9)+_0x34d1a6+'\x27))and\x20ID\x20ne\x20\x27'+itemid+'\x27&$expand=AttachmentFiles'),$[_0x5b16f0(0x213)]({'url':_0x19522f,'type':_0x5b16f0(0x1e2),'cache':!![],'async':![],'headers':{'ACCEPT':_0x5b16f0(0x1fb)},'success':function(_0x7f6da8){var _0x12cae0=_0x5b16f0;$(_0x7f6da8['d'][_0x12cae0(0x1c7)])[_0x12cae0(0x20a)]==0x0?(_0x333ab2=!![],AddCurrentUserasTechAdmin()):alert(_0x12cae0(0x1b8));},'error':function(){}}),_0x333ab2;}function AddCurrentUserasTechAdmin(){var _0x4eed69=a0_0x4d5a,_0x1a2132=$(_0x4eed69(0x20e))[_0x4eed69(0x209)]()[_0x4eed69(0x214)](),_0x120315=$(_0x4eed69(0x1f3))[_0x4eed69(0x209)](),_0x28505c=$(_0x4eed69(0x200))[_0x4eed69(0x209)]()[_0x4eed69(0x214)](),_0x4ab3d=new Date(_0x120315),_0x192872=_0x4ab3d['getDate'](),_0x5ea8c8=_0x4ab3d['getMonth']()+0x1,_0x37ae6d=_0x4ab3d[_0x4eed69(0x1ee)](),_0x43d327=new Array();_0x43d327[_0x4eed69(0x1d4)]();(_0x1a2132==''||_0x120315=='')&&alert(_0x4eed69(0x1c6));var _0x1e1942=_0x4eed69(0x203),_0x341541,_0x33b0c6='SP.Data.Magazine_x005f_ItemsListItem';_0x341541={'__metadata':{'type':_0x33b0c6},'Title':_0x1a2132,'Publish_Date':_0x120315,'Volume':_0x28505c,'Month':_0x5ea8c8['toString'](),'Year':_0x37ae6d['toString']()};if(itemid==''){if($(_0x4eed69(0x1cd))[_0x4eed69(0x209)]()=='')return alert(_0x4eed69(0x1db)),![];if($(_0x4eed69(0x1fc))[_0x4eed69(0x209)]()=='')return alert(_0x4eed69(0x1de)),![];$[_0x4eed69(0x1ca)](AddItemToList(_0x1e1942,_0x341541))[_0x4eed69(0x1d1)](function(_0x5ce4f5){var _0x585750=_0x4eed69;AddAttachments(_0x5ce4f5['d']['Id']),alert(_0x585750(0x206)),$(_0x585750(0x20e))[_0x585750(0x209)](''),$(_0x585750(0x1f3))[_0x585750(0x209)](''),$(_0x585750(0x200))[_0x585750(0x209)](''),location[_0x585750(0x1eb)]=_0x585750(0x1e3);});}else $[_0x4eed69(0x1ca)](updateMagazineItemWithID(_0x1e1942,_0x341541,itemid))[_0x4eed69(0x1d1)](function(_0x3c40fb){var _0x50bda0=_0x4eed69;checkFileExists(itemid),alert(_0x50bda0(0x1df)),$(_0x50bda0(0x1ce))['hide'](),$(_0x50bda0(0x20e))['val'](''),$(_0x50bda0(0x1f3))[_0x50bda0(0x209)](''),$(_0x50bda0(0x200))[_0x50bda0(0x209)](''),location[_0x50bda0(0x1eb)]='../Pages/MagazineViewAll.aspx?WebAppId=12';});}function updateMagazineItemWithID(_0x4af74a,_0x1f5c02,_0x28cc3d){var _0x1fabf5=a0_0x4d5a,_0x686f39=titanForWork[_0x1fabf5(0x1b9)](_0x1fabf5(0x1f0)),_0x356242=$[_0x1fabf5(0x1f7)]();return $[_0x1fabf5(0x213)]({'url':_0x686f39+_0x1fabf5(0x1ea)+_0x4af74a+_0x1fabf5(0x1e7)+_0x28cc3d+'\x27)','type':_0x1fabf5(0x1c0),'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$(_0x1fabf5(0x1ba))[_0x1fabf5(0x209)](),'content-Type':_0x1fabf5(0x1fb),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x1fabf5(0x1f4)](_0x1f5c02),'async':![],'success':function(_0x5313c4){var _0x21e197=_0x1fabf5;_0x356242[_0x21e197(0x20d)](!![]);},'error':function(_0x401bd7){var _0x41b08c=_0x1fabf5;alert(JSON[_0x41b08c(0x1f4)](_0x401bd7)),_0x356242[_0x41b08c(0x1cf)](_0x401bd7);}}),_0x356242[_0x1fabf5(0x20b)]();}function AddItemToList(_0x514f8f,_0x556fb6){var _0x329303=a0_0x4d5a,_0x4ee6d9=titanForWork[_0x329303(0x1b9)](_0x329303(0x1f0)),_0x2b794b=$['Deferred']();return $[_0x329303(0x213)]({'url':_0x4ee6d9+_0x329303(0x1ea)+_0x514f8f+_0x329303(0x1c5),'type':_0x329303(0x1c0),'async':![],'headers':{'accept':_0x329303(0x1fb),'X-RequestDigest':$('#__REQUESTDIGEST')[_0x329303(0x209)](),'content-Type':_0x329303(0x1fb)},'data':JSON['stringify'](_0x556fb6),'success':function(_0x53f20c){var _0xc44815=_0x329303;console[_0xc44815(0x1ed)](_0x514f8f),_0x2b794b[_0xc44815(0x20d)](_0x53f20c);},'error':function(_0x1a47d6){var _0x12dcb3=_0x329303;alert(_0x12dcb3(0x1e8)+JSON['stringify'](_0x1a47d6)),_0x2b794b['reject'](_0x1a47d6);}}),_0x2b794b[_0x329303(0x20b)]();}function AddAttachments(_0x1c8474){var _0xdbc32c=a0_0x4d5a,_0x398771=titanForWork[_0xdbc32c(0x1b9)](_0xdbc32c(0x1f0)),_0x11e7d6='';$[_0xdbc32c(0x213)]({'url':_spPageContextInfo[_0xdbc32c(0x1d0)]+'/_api/contextinfo','method':_0xdbc32c(0x1c0),'async':![],'headers':{'ACCEPT':_0xdbc32c(0x1fb),'content-type':_0xdbc32c(0x1fb)},'success':function(_0x3ab1d2){var _0x1a6617=_0xdbc32c;_0x11e7d6=_0x3ab1d2['d'][_0x1a6617(0x212)][_0x1a6617(0x202)];},'error':function(_0x35c590){}})['done'](function(){var _0x1f83c6=_0xdbc32c,_0x2db04b=$(_0x1f83c6(0x1cd)),_0x23168c=$(_0x1f83c6(0x1cd))[_0x1f83c6(0x209)]();if(_0x23168c[_0x1f83c6(0x20a)]>0x0){var _0x277fe3=_0x2db04b[0x0]['files'][0x0][_0x1f83c6(0x20c)],_0x4686c6=new FileReader();_0x4686c6[_0x1f83c6(0x1cc)]=function(_0xb56f49){var _0x1e0b62=_0x1f83c6,_0x3e9822=_0xb56f49['target'][_0x1e0b62(0x208)],_0x90e0b4=$[_0x1e0b62(0x213)]({'url':_0x398771+_0x1e0b62(0x1f1)+_0x1c8474+_0x1e0b62(0x205)+_0x277fe3+'\x27)','method':_0x1e0b62(0x1c0),'binaryStringRequestBody':!![],'data':_0x3e9822,'processData':![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x11e7d6},'success':function(_0x547a8d){var _0x582299=_0x1e0b62;console[_0x582299(0x1ed)](_0x582299(0x1d6));},'error':function(_0x157dc2){var _0x356601=_0x1e0b62;alert(_0x356601(0x1d2)+_0x157dc2[_0x356601(0x211)]);}});};};_0x23168c[_0x1f83c6(0x20a)]>0x1&&_0x4686c6['readAsArrayBuffer'](_0x2db04b[0x0][_0x1f83c6(0x1e4)][0x0]);})[_0xdbc32c(0x1d1)](function(){var _0x493134=_0xdbc32c;debugger;var _0x2fa4b0=$('#file2'),_0x139a0d=$(_0x493134(0x1fc))[_0x493134(0x209)]();if(_0x139a0d[_0x493134(0x20a)]>0x1){var _0x2815ab=_0x2fa4b0[0x0][_0x493134(0x1e4)][0x0][_0x493134(0x20c)],_0x273a04=new FileReader();_0x273a04[_0x493134(0x1cc)]=function(_0x1fd691){var _0x10015f=_0x493134,_0x32325f=_0x1fd691[_0x10015f(0x1da)][_0x10015f(0x208)],_0x29205d=$[_0x10015f(0x213)]({'url':_0x398771+_0x10015f(0x1f1)+_0x1c8474+_0x10015f(0x205)+_0x2815ab+'\x27)','method':_0x10015f(0x1c0),'binaryStringRequestBody':!![],'data':_0x32325f,'processData':![],'async':![],'headers':{'ACCEPT':_0x10015f(0x1fb),'X-RequestDigest':_0x11e7d6},'success':function(_0x5db50d){var _0x52e26e=_0x10015f;console[_0x52e26e(0x1ed)](_0x52e26e(0x1fe)+_0x5db50d);},'error':function(_0x33bc6a){var _0x420689=_0x10015f;alert(_0x420689(0x1d2)+_0x33bc6a[_0x420689(0x211)]);}});};};_0x139a0d['length']>0x1&&_0x273a04['readAsArrayBuffer'](_0x2fa4b0[0x0][_0x493134(0x1e4)][0x0]);});}function BindMagazine(_0x1acef8){var _0x358087=a0_0x4d5a;debugger;$('#mazinemodle')[_0x358087(0x1bf)](),itemid=_0x1acef8;var _0x10a312=titanForWork[_0x358087(0x1b9)]('CompanySiteUrl'),_0x4dd2a7='';_0x4dd2a7=_0x358087(0x1e5)+itemid+'\x27';var _0x539fc3=_0x10a312+_0x358087(0x1c1)+_0x4dd2a7;$[_0x358087(0x213)]({'url':_0x539fc3,'headers':{'Accept':_0x358087(0x1fb)},'async':![],'success':function(_0x1d3d86){var _0x5473ba=_0x358087,_0x25fc58=_0x1d3d86['d'][_0x5473ba(0x1c7)];for(var _0x15602d=0x0;_0x15602d<_0x25fc58[_0x5473ba(0x20a)];_0x15602d++){var _0xba9719=new Date(_0x25fc58[_0x15602d]['Publish_Date']),_0x1acf9e=_0xba9719[_0x5473ba(0x1f2)](),_0x58e83b=_0xba9719[_0x5473ba(0x1bc)]()+0x1,_0x301028=_0xba9719['getFullYear'](),_0x27866f=_0x58e83b+'/'+_0x1acf9e+'/'+_0x301028,_0x479db8=_0x25fc58[_0x15602d][_0x5473ba(0x201)],_0x1a18cb=_0x27866f[_0x5473ba(0x210)](),_0x4335f4=_0x25fc58[_0x15602d][_0x5473ba(0x1d7)];$(_0x5473ba(0x20e))['val'](_0x479db8),$('#input1')['val'](_0x1a18cb),$('#input')[_0x5473ba(0x209)](_0x4335f4);}},'eror':function(_0x346879){var _0xdf0904=_0x358087;console['log'](_0xdf0904(0x1c3));}});}function checkFileExists(_0x45e3a1){var _0x24f639=a0_0x4d5a;Handler=this;var _0x3f369e='',_0x23297e=titanForWork['getQueryStringParameter'](_0x24f639(0x1f0));$[_0x24f639(0x213)]({'url':_0x23297e+_0x24f639(0x1d5)+_0x45e3a1+_0x24f639(0x1d8),'method':'GET','headers':{'Accept':_0x24f639(0x1ff)},'async':![],'success':function(_0x5ebb78){var _0x40e2ab=_0x24f639,_0x537209=_0x5ebb78['d'];if(_0x5ebb78['d']['Attachments']==!![])for(var _0x4327cb=0x0;_0x4327cb<_0x5ebb78['d'][_0x40e2ab(0x1fa)][_0x40e2ab(0x1c7)][_0x40e2ab(0x20a)];_0x4327cb++){var _0x11af3d=$(_0x40e2ab(0x1cd))[_0x40e2ab(0x209)](),_0x50351d=$(_0x40e2ab(0x1fc))[_0x40e2ab(0x209)](),_0x27362=_0x5ebb78['d'][_0x40e2ab(0x1fa)][_0x40e2ab(0x1c7)][_0x4327cb][_0x40e2ab(0x1c9)],_0x3968c0=_0x27362[_0x40e2ab(0x1c8)]('.')['pop']();_0x3968c0==_0x40e2ab(0x207)?_0x50351d['length']>0x0&&DeleteFile(_0x45e3a1,_0x5ebb78['d'][_0x40e2ab(0x1fa)][_0x40e2ab(0x1c7)][_0x4327cb]['FileName']):_0x11af3d[_0x40e2ab(0x20a)]>0x0&&DeleteFile(_0x45e3a1,_0x5ebb78['d'][_0x40e2ab(0x1fa)][_0x40e2ab(0x1c7)][_0x4327cb][_0x40e2ab(0x1c9)]);}AddAttachments(_0x45e3a1);},'error':function(_0x2ffa39){}});}function a0_0xf26f(){var _0xd22ede=['target','Please\x20attach\x20a\x20cover.\x20','Magazine_items','143735sAqvVO','Please\x20attach\x20a\x20magazine.\x20','Updated\x20successfully.','61991ufOtrs','3340700sUbbGx','GET','../Pages/MagazineViewAll.aspx?WebAppId=12','files','ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27','\x27)/GetItemById(\x27','Failure\x20:\x20','678672VeooqN','/_api/web/lists/getbytitle(\x27','href','DELETE','log','getFullYear','30PbkyOG','CompanySiteUrl','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','getDate','#input1','stringify','63WZopKd','6570576KKJrES','Deferred','\x27))&$expand=AttachmentFiles','\x27)\x20and\x20(Publish_Date\x20eq\x20\x27','AttachmentFiles','application/json;odata=verbose','#file2','26uvTZWN','Save\x20pdf','application/json;\x20odata=verbose','#input','Title','FormDigestValue','Magazine_Items','getElementById','\x27)/AttachmentFiles/\x20add(FileName=\x27','Added\x20successfully.','pdf','result','val','length','promise','name','resolve','#input2','78pQWLrp','toString','responseText','GetContextWebInformation','ajax','trim','Duplicate\x20Magazine\x20found.','getQueryStringParameter','#__REQUESTDIGEST','8145410FHTKxT','getMonth','Please\x20fill\x20all\x20required\x20fields.','#Submit','modal','POST','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','90100dPsGdz','error','/_api/web/lists/GetByTitle(\x27','\x27)/items','Fill\x20all\x20mandatory\x20fields!','results','split','FileName','when','__REQUESTDIGEST','onload','#file1','#mazinemodle','reject','webAbsoluteUrl','done','Error\x20occured.',')/AttachmentFiles/getByFileName(\x27','push','/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27','Save\x20img','Volume','\x27)?$select=*&$expand=AttachmentFiles','\x27)/GetItemById('];a0_0xf26f=function(){return _0xd22ede;};return a0_0xf26f();}function DeleteFile(_0x18870f,_0x548909){var _0x3d4d79=a0_0x4d5a;Handler=this;var _0x31b475=_0x3d4d79(0x1dc),_0x3555fc=titanForWork[_0x3d4d79(0x1b9)](_0x3d4d79(0x1f0));$[_0x3d4d79(0x213)]({'url':_0x3555fc+_0x3d4d79(0x1c4)+_0x31b475+_0x3d4d79(0x1d9)+_0x18870f+_0x3d4d79(0x1d3)+_0x548909+'\x27)\x20\x20','method':_0x3d4d79(0x1ec),'async':![],'headers':{'X-RequestDigest':document[_0x3d4d79(0x204)](_0x3d4d79(0x1cb))['value']},'success':function(_0x2b1f1d){},'error':function(_0x444ad2){}});}function a0_0x4d5a(_0x2abb23,_0x291852){var _0xf26ffc=a0_0xf26f();return a0_0x4d5a=function(_0x4d5ae3,_0x27e513){_0x4d5ae3=_0x4d5ae3-0x1b8;var _0x4b06a5=_0xf26ffc[_0x4d5ae3];return _0x4b06a5;},a0_0x4d5a(_0x2abb23,_0x291852);}function ClearFields(){var _0x649e12=a0_0x4d5a;$('#input2')[_0x649e12(0x209)](''),$('#input1')[_0x649e12(0x209)](''),$(_0x649e12(0x200))[_0x649e12(0x209)]('');}