var a0_0x13960a=a0_0x2f7d;(function(_0x4b65ac,_0xac7d6c){var _0x53c29c=a0_0x2f7d,_0xf4a966=_0x4b65ac();while(!![]){try{var _0xe20887=parseInt(_0x53c29c(0x18b))/0x1+parseInt(_0x53c29c(0x190))/0x2*(-parseInt(_0x53c29c(0x16f))/0x3)+-parseInt(_0x53c29c(0x198))/0x4*(parseInt(_0x53c29c(0x1cb))/0x5)+parseInt(_0x53c29c(0x1b5))/0x6+-parseInt(_0x53c29c(0x189))/0x7+-parseInt(_0x53c29c(0x17d))/0x8+parseInt(_0x53c29c(0x1ac))/0x9*(parseInt(_0x53c29c(0x1b6))/0xa);if(_0xe20887===_0xac7d6c)break;else _0xf4a966['push'](_0xf4a966['shift']());}catch(_0x272210){_0xf4a966['push'](_0xf4a966['shift']());}}}(a0_0x3424,0x93b12));var currentCompanyid='',getCurrentCompanySiteURL='';$(document)[a0_0x13960a(0x1d4)](function(){var _0x295a72=a0_0x13960a;currentCompanyid=titanForWork['getQueryStringParameter'](_0x295a72(0x19a));var _0x127a10=new Array();_0x127a10[_0x295a72(0x1d7)](_0x295a72(0x1c3));var _0x2481a9=UserExistInProcessApprover(currentCompanyid,'',_0x127a10);for(var _0x3ac0c6=0x0;_0x3ac0c6<_0x2481a9[_0x295a72(0x1bd)];_0x3ac0c6++){if(_0x2481a9[_0x3ac0c6]['webPartName']=='Occasion')$('#newOccasionbx')[_0x295a72(0x1b4)]();else{}}$(_0x295a72(0x175))['is'](_0x295a72(0x1c1))==![]&&$('#messageNotAthorizedAcces')[_0x295a72(0x1d0)](_0x295a72(0x18c));$('#occasiondate')[_0x295a72(0x1cf)]({'changeMonth':!![],'changeYear':!![],'yearRange':_0x295a72(0x197)}),$(_0x295a72(0x1ae))[_0x295a72(0x1cf)]('option',_0x295a72(0x1ca),'dd/mm/yy');currentCompanyid!=null&&currentCompanyid!=''&&(currentCompanyid[_0x295a72(0x1a9)]('#')!=-0x1&&(currentCompanyid=currentCompanyid['split']('#')[0x0]),currentCompanyid=currentCompanyid);GetCompanyEmployees(currentCompanyid,_0x295a72(0x176)),$(_0x295a72(0x1a1))['change'](function(){var _0x576fc8=_0x295a72;GetCompanyEmployees($(this)[_0x576fc8(0x1ad)](),'LoadProfile');}),$('#btnsubmit')[_0x295a72(0x1c9)](function(){AddOccasion();}),$(_0x295a72(0x1c8))[_0x295a72(0x1c9)](function(){redirectCancel();});var _0x2d89a9=titanForWork[_0x295a72(0x19c)](_0x295a72(0x1bc)),_0x44b5f7=GetSiteUrl();getCurrentCompanySiteURL=_0x44b5f7,BindOccasiontype(),_0x2d89a9!=''&&_0x2d89a9!=null&&LoadOccasions(getCurrentCompanySiteURL,_0x2d89a9);});function BindOccasiontype(){var _0x30796c=a0_0x13960a;$[_0x30796c(0x182)]({'url':_spPageContextInfo['webAbsoluteUrl']+_0x30796c(0x188),'type':_0x30796c(0x174),'async':![],'headers':{'accept':'application/json;odata=verbose'},'success':function(_0x194454){var _0x124b22=_0x30796c,_0x10a251=_0x194454['d'][_0x124b22(0x1d5)];for(var _0xbce98a=0x0;_0xbce98a<_0x10a251['length'];_0xbce98a++){var _0x3219cc=_0x10a251[_0xbce98a]['OccasionDefault'],_0x522b34=_0x10a251[_0xbce98a][_0x124b22(0x1bf)];$('#ddlOccasionType')[_0x124b22(0x178)]($(_0x124b22(0x16d))['attr'](_0x124b22(0x1cc),_0x3219cc)[_0x124b22(0x1d0)](_0x522b34));}},'error':function(_0x112161){var _0x5e4c65=_0x30796c;alert(JSON[_0x5e4c65(0x1d9)](_0x112161));}});}function GetDateStandardFormat(_0x58fc4b){var _0x26bd3d=a0_0x13960a,_0x16a3f5=ConvertDateFormatToddMMyyyy(_0x58fc4b),_0x4e1636=new Date(_0x16a3f5),_0x24a26f=0x3c*0x3c*0x18*0x3e8,_0x5f38dd=new Date(_0x4e1636[_0x26bd3d(0x1d3)]()),_0x1b5b54=_0x5f38dd[_0x26bd3d(0x195)]();return _0x1b5b54;}function ConvertDateFormatToddMMyyyy(_0x5e12e5){var _0x236d63=a0_0x13960a,_0x197eae=stringToDate(_0x5e12e5,_0x236d63(0x18a),'/');return _0x197eae;}function stringToDate(_0x5a9f8c,_0x167afc,_0x32b637){var _0x5f3452=a0_0x13960a,_0x24ed85=_0x167afc[_0x5f3452(0x193)](),_0x14c52b=_0x24ed85[_0x5f3452(0x170)](_0x32b637),_0x4fce17=_0x5a9f8c[_0x5f3452(0x170)](_0x32b637),_0x555430=_0x14c52b[_0x5f3452(0x1a9)]('mm'),_0x29582c=_0x14c52b[_0x5f3452(0x1a9)]('dd'),_0x37b270=_0x14c52b[_0x5f3452(0x1a9)](_0x5f3452(0x1d2)),_0x30d330=parseInt(_0x4fce17[_0x555430]);_0x30d330-=0x1;var _0x45efcb=new Date(_0x4fce17[_0x37b270],_0x30d330,_0x4fce17[_0x29582c]);return _0x45efcb;}function AddOccasion(){var _0x5d796a=a0_0x13960a,_0x1a2281=$(_0x5d796a(0x1a1))[_0x5d796a(0x1ad)]();if(_0x1a2281!=0x0){var _0x2efccd=$('#ddlOccasionType')[_0x5d796a(0x1ad)](),_0x1d93df='';if($('#occasiondate')[_0x5d796a(0x1ad)]()==''||$(_0x5d796a(0x1ae))[_0x5d796a(0x1ad)]()==null){alert('Please\x20select\x20Occasion\x20Date.');return;}else _0x1d93df=GetDateStandardFormat($(_0x5d796a(0x1ae))[_0x5d796a(0x1ad)]());if(_0x1d93df==''||_0x1d93df==null){alert(_0x5d796a(0x183));return;}else{var _0x1a0edc=titanForWork['getQueryStringParameter']('itemId'),_0x12178b=$(_0x5d796a(0x18d))[_0x5d796a(0x1ad)]();_0x1a0edc==''||_0x1a0edc==null?ValidateUserIsAlreadyExistthisOccasion(_0x2efccd,_0x1d93df,_0x12178b,'')==!![]?AddNewOccasionDetails(_0x1a2281,_0x2efccd,_0x1d93df,_0x12178b,_0x1a0edc):alert(_0x5d796a(0x1a7)):ValidateUserIsAlreadyExistthisOccasion(_0x2efccd,_0x1d93df,_0x12178b,_0x1a0edc)==!![]?AddNewOccasionDetails(_0x1a2281,_0x2efccd,_0x1d93df,_0x12178b,_0x1a0edc):alert('Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.');}}else alert('Please\x20select\x20employee.');}function GetSiteUrl(){var _0x525a3d=a0_0x13960a,_0x309e08='',_0x8f1a02='';return _0x309e08=_spPageContextInfo[_0x525a3d(0x179)]+_0x525a3d(0x199)+currentCompanyid+'\x27',$[_0x525a3d(0x182)]({'url':_0x309e08,'headers':{'Accept':_0x525a3d(0x180)},'async':![],'success':function(_0x41a6be){var _0x56afc4=_0x525a3d,_0x208554=_0x41a6be['d'][_0x56afc4(0x1d5)];_0x208554[_0x56afc4(0x1bd)]>0x0&&(_0x8f1a02=_0x208554[0x0][_0x56afc4(0x1b3)]);},'eror':function(_0x1240a7){var _0x267cb5=_0x525a3d;console['log'](_0x267cb5(0x1bb));}}),_0x8f1a02;}function LoadOccasions(_0x4ebd9e,_0x206756){var _0x1e3870=a0_0x13960a,_0x3926e2=_0x4ebd9e+_0x1e3870(0x1c0)+_0x206756+'\x27';$['ajax']({'url':_0x3926e2,'headers':{'Accept':_0x1e3870(0x180)},'async':![],'success':function(_0x1d0292){var _0x1112b7=_0x1e3870,_0xecf670=_0x1d0292['d']['results'];if(_0xecf670[_0x1112b7(0x1bd)]>0x0){$(_0x1112b7(0x1a1))[_0x1112b7(0x1ad)](_0xecf670[0x0]['EmployeeId']);var _0x4e43ab=new Date(_0xecf670[0x0][_0x1112b7(0x177)]),_0x56caac='';_0x56caac=$[_0x1112b7(0x1cf)][_0x1112b7(0x1a0)](_0x1112b7(0x186),_0x4e43ab),$(_0x1112b7(0x1ae))[_0x1112b7(0x1ad)](_0x56caac),$(_0x1112b7(0x1c4))[_0x1112b7(0x1ad)](_0xecf670[0x0]['OccasionType']),GetCompanyEmployees(_0xecf670[0x0][_0x1112b7(0x18f)],_0x1112b7(0x17c));}},'eror':function(_0x30cc7c){var _0x5b5bd9=_0x1e3870;console[_0x5b5bd9(0x17a)](_0x5b5bd9(0x1bb));}});}function a0_0x3424(){var _0xdc782c=['log','hide','LoadProfile','2553768umvchs','POST','Deferred','application/json;odata=verbose','ListItem','ajax','Please\x20select\x20Occasion\x20Date.','empty','PATCH','dd/mm/yy','resolve','/_api/web/lists/getbytitle(\x27OccasionMaster\x27)/items?$select=OccasionDefault,OccasionLang1,OccasionLang2,OccasionLang3,OccasionLang4,OccasionLang5,OccasionLang6,OccasionLang7,OccasionLang8,OccasionLang9,OccasionLang10','1130003fhvIQn','dd/MM/yyyy','894006rTBGpP','You\x20are\x20not\x20authorized\x20to\x20access\x20this\x20page.','#spanemplyeePeopleId','Manager','EmployeeId','795332QYzqlM','\x27)/GetItemById(\x27','OfficeLocation','toLowerCase','CompanyName','toISOString','#spanarea','-1:+0','380aWGehQ','/_api/web/lists/getbytitle(\x27Companies\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27','CompanyId','&$filter=OccasionDate\x20eq\x20\x27','getQueryStringParameter','promise','#empinformation','reject','formatDate','#ddlemployee','LogonName','&undefinedstr=undefinedstr','OfficeName','attr','Email','Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.','Designation','indexOf','?WebAppId=','ID,LogonName/Title,LogonName/UserName,CompanyId&$expand=LogonName&$filter=CompanyId\x20eq\x20\x27','3171483cxwlRl','val','#occasiondate','department','Title','\x27\x20and\x20UserNameId\x20eq\x20\x27','when','SiteURL','show','732840RQWtUs','30qFzMdw','UserName','sourcelocation','Department','#spandesination','error','itemId','length','Department\x20:\x20','OccasionLang1','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$filter=ID\x20eq\x20\x27',':visible','charAt','Occasion','#ddlOccasionType','done','MobileNumber','/_api/web/lists/getbytitle(\x27Employees\x27)/items?$select=','#btncancel','click','dateFormat','31055VTnmUI','value','SP.Data.','DepartmentName','datepicker','text','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$top=10','yyyy','getTime','ready','results','toUpperCase','push','\x27\x20and\x20Status\x20eq\x20\x27Active\x27','stringify','ID,JoiningDate,DateOfAnniversary,FullName,DateOfBirth,LogonName/Title,LogonName/ID,LogonName/UserName,OfficeLocation/OfficeName,Email,Department/DepartmentName,Designation,Company/CompanyName,Company/ID,Manager,MobileNumber&$expand=LogonName,Company,Department,OfficeLocation&$filter=ID\x20eq\x20\x27','<option></option>','OccasionDetails','3JjfPHY','split','Occasion\x20has\x20been\x20updated\x20successfully.','#__REQUESTDIGEST','/_api/web/lists/getbytitle(\x27','GET','#newOccasionbx','BindDropDown','OccasionDate','append','webAbsoluteUrl'];a0_0x3424=function(){return _0xdc782c;};return a0_0x3424();}function AddNewOccasionDetails(_0x29be75,_0x5dcb42,_0x55d5f8,_0x24357d,_0x2fe869){var _0x234bd5=a0_0x13960a,_0x172904=getCurrentCompanySiteURL,_0x12cd45=_0x234bd5(0x16e),_0x564475=GetItemTypeForListNameDetails(_0x12cd45),_0x264dd4;_0x264dd4={'__metadata':{'type':_0x564475},'EmployeeId':_0x29be75,'OccasionType':_0x5dcb42,'OccasionDate':_0x55d5f8,'Details':_0x5dcb42,'Title':_0x5dcb42,'UserNameId':parseInt(_0x24357d)},_0x2fe869==''||_0x2fe869==null?$[_0x234bd5(0x1b2)](AddItemToList(_0x172904,_0x12cd45,_0x264dd4))[_0x234bd5(0x1c5)](function(_0x7c06b0){alert('Occasion\x20has\x20been\x20added\x20successfully.');}):$[_0x234bd5(0x1b2)](updateItemWithID(_0x172904,_0x12cd45,_0x264dd4,parseInt(_0x2fe869)))[_0x234bd5(0x1c5)](function(_0x41f03d){var _0x264037=_0x234bd5;alert(_0x264037(0x171));});}function redirectCancel(){var _0x1f4bfb=a0_0x13960a,_0x35f0cd=titanForWork[_0x1f4bfb(0x19c)](_0x1f4bfb(0x1b8)),_0x54f2b5=titanForWork[_0x1f4bfb(0x19c)](_0x1f4bfb(0x1af)),_0xfb21f3='';_0x54f2b5!=null&&_0x54f2b5!=''&&(_0xfb21f3='&DepartmentId='+_0x54f2b5);var _0x58406a=_0x35f0cd+_0x1f4bfb(0x1aa)+currentCompanyid+_0xfb21f3+_0x1f4bfb(0x1a3);$(location)[_0x1f4bfb(0x1a5)]('href',_0x58406a);}function a0_0x2f7d(_0x38a147,_0x59f75d){var _0x342467=a0_0x3424();return a0_0x2f7d=function(_0x2f7d90,_0x110bd5){_0x2f7d90=_0x2f7d90-0x16c;var _0x5af498=_0x342467[_0x2f7d90];return _0x5af498;},a0_0x2f7d(_0x38a147,_0x59f75d);}function GetItemTypeForListNameDetails(_0x5e696d){var _0x139346=a0_0x13960a;return _0x139346(0x1cd)+_0x5e696d[_0x139346(0x1c2)](0x0)[_0x139346(0x1d6)]()+_0x5e696d[_0x139346(0x170)]('\x20')['join']('')['slice'](0x1)+_0x139346(0x181);}function AddItemToList(_0x5f21dd,_0xa890bc,_0x185828){var _0x1d2f9c=a0_0x13960a,_0x34764a=$[_0x1d2f9c(0x17f)]();return $['ajax']({'url':_0x5f21dd+'/_api/web/lists/getbytitle(\x27'+_0xa890bc+'\x27)/items','type':_0x1d2f9c(0x17e),'async':![],'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST')[_0x1d2f9c(0x1ad)](),'content-Type':_0x1d2f9c(0x180)},'data':JSON['stringify'](_0x185828),'success':function(_0x20a75b){var _0x5caab8=_0x1d2f9c;_0x34764a[_0x5caab8(0x187)](_0x20a75b);},'error':function(_0x3cd8d9){var _0x1dc9a1=_0x1d2f9c;alert(JSON[_0x1dc9a1(0x1d9)](_0x3cd8d9)),_0x34764a[_0x1dc9a1(0x19f)](_0x3cd8d9);}}),_0x34764a[_0x1d2f9c(0x19d)]();}function updateItemWithID(_0x412ab5,_0xfcdfe7,_0x3ef6a9,_0x32be90){var _0x101a04=a0_0x13960a,_0xd00bbf=$[_0x101a04(0x17f)]();return $[_0x101a04(0x182)]({'url':_0x412ab5+_0x101a04(0x173)+_0xfcdfe7+_0x101a04(0x191)+_0x32be90+'\x27)','type':_0x101a04(0x17e),'headers':{'accept':_0x101a04(0x180),'X-RequestDigest':$(_0x101a04(0x172))[_0x101a04(0x1ad)](),'content-Type':_0x101a04(0x180),'X-Http-Method':_0x101a04(0x185),'If-Match':'*'},'data':JSON[_0x101a04(0x1d9)](_0x3ef6a9),'async':![],'success':function(_0x262008){var _0x56e384=_0x101a04;_0xd00bbf[_0x56e384(0x187)](!![]);},'error':function(_0x4c6bb8){var _0x59c603=_0x101a04;alert(JSON['stringify'](_0x4c6bb8)),_0xd00bbf[_0x59c603(0x19f)](_0x4c6bb8);}}),_0xd00bbf[_0x101a04(0x19d)]();}function GetCompanyEmployees(_0x1d0b35,_0xaae2c0){var _0x1eba8a=a0_0x13960a,_0x54f4c4='';_0xaae2c0=='BindDropDown'&&($(_0x1eba8a(0x1a1))[_0x1eba8a(0x184)]()[_0x1eba8a(0x178)]('<option\x20value=\x220\x22>-Select\x20Employee-</option>'),_0x54f4c4=_0x1eba8a(0x1ab)+_0x1d0b35+_0x1eba8a(0x1d8));_0xaae2c0==_0x1eba8a(0x17c)&&(_0x54f4c4=_0x1eba8a(0x16c)+_0x1d0b35+_0x1eba8a(0x1d8));var _0x170be0=_spPageContextInfo[_0x1eba8a(0x179)]+_0x1eba8a(0x1c7)+_0x54f4c4;$['ajax']({'url':_0x170be0,'headers':{'Accept':_0x1eba8a(0x180)},'async':![],'success':function(_0x2716e8){var _0x51f850=_0x1eba8a,_0x233bbd=_0x2716e8['d']['results'];_0x233bbd[_0x51f850(0x1bd)]==0x0&&$(_0x51f850(0x19e))[_0x51f850(0x17b)]();for(var _0x474de1=0x0;_0x474de1<_0x233bbd[_0x51f850(0x1bd)];_0x474de1++){if(_0xaae2c0=='BindDropDown'){var _0x459824=_0x233bbd[_0x474de1][_0x51f850(0x1a2)][_0x51f850(0x1b0)];(_0x459824==null||_0x459824=='')&&(_0x459824='');var _0x455e3c=_0x233bbd[_0x474de1]['ID'];$(_0x51f850(0x1a1))['append']($(_0x51f850(0x16d))[_0x51f850(0x1a5)]('value',_0x455e3c)['text'](_0x459824));}if(_0xaae2c0=='LoadProfile'){$('#empinformation')[_0x51f850(0x1b4)]();var _0x459824=_0x233bbd[_0x474de1]['LogonName']['Title'];(_0x459824==null||_0x459824=='')&&(_0x459824='');var _0x480c60=_0x233bbd[_0x474de1][_0x51f850(0x1a2)][_0x51f850(0x1b7)];(_0x480c60==null||_0x480c60=='')&&(_0x480c60='');var _0x28927b=_0x233bbd[_0x474de1][_0x51f850(0x1a6)];(_0x28927b==null||_0x28927b=='')&&(_0x28927b='');var _0x311577=_0x233bbd[_0x474de1]['LogonName']['ID'];$(_0x51f850(0x18d))[_0x51f850(0x1ad)](_0x311577),$('#spanEmailId')[_0x51f850(0x1d0)](_0x28927b);var _0x4b5f49=_0x233bbd[_0x474de1][_0x51f850(0x1b9)][_0x51f850(0x1ce)];(_0x4b5f49==null||_0x4b5f49=='')&&(_0x4b5f49='');$('#spandepartment')[_0x51f850(0x1d0)](_0x51f850(0x1be)+_0x4b5f49);var _0x547050=_0x233bbd[_0x474de1][_0x51f850(0x1a8)];(_0x547050==null||_0x547050=='')&&(_0x547050='');$(_0x51f850(0x1ba))['text'](_0x547050);var _0x1f32fa=_0x233bbd[_0x474de1]['Company'][_0x51f850(0x194)];(_0x1f32fa==null||_0x1f32fa=='')&&(_0x1f32fa='');var _0x4c1d6b=_0x233bbd[_0x474de1][_0x51f850(0x18e)];(_0x4c1d6b==null||_0x4c1d6b=='')&&(_0x4c1d6b='');var _0x5c2245=_0x233bbd[_0x474de1][_0x51f850(0x1c6)];(_0x5c2245==null||_0x5c2245=='')&&(_0x5c2245='');var _0x4cf336=_0x233bbd[_0x474de1][_0x51f850(0x192)][_0x51f850(0x1a4)];(_0x4cf336==null||_0x4cf336=='')&&(_0x4cf336=''),$(_0x51f850(0x196))[_0x51f850(0x1d0)](_0x4cf336);}}},'eror':function(_0x268730){var _0x1be597=_0x1eba8a;console['log'](_0x1be597(0x1bb));}});}function ValidateUserIsAlreadyExistthisOccasion(_0x3d9036,_0x528477,_0x28a812,_0x284521){var _0x55c8a4=a0_0x13960a,_0x1eaab5=!![],_0x4b391d='';_0x4b391d=_0x55c8a4(0x19b)+_0x528477+_0x55c8a4(0x1b1)+_0x28a812+'\x27\x20and\x20OccasionType\x20eq\x20\x27'+_0x3d9036+'\x27';var _0x32754d=getCurrentCompanySiteURL+_0x55c8a4(0x1d1)+_0x4b391d;return $['ajax']({'url':_0x32754d,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x596dc3){var _0x2ebdac=_0x55c8a4,_0x583abf=_0x596dc3['d'][_0x2ebdac(0x1d5)];if(_0x583abf[_0x2ebdac(0x1bd)]>0x0)for(var _0xf9650b=0x0;_0xf9650b<_0x583abf['length'];_0xf9650b++){_0x583abf[_0xf9650b]['ID']!=_0x284521&&(_0x1eaab5=![]);}},'eror':function(_0x2d8a2c){var _0x45da34=_0x55c8a4;console[_0x45da34(0x17a)](_0x45da34(0x1bb));}}),_0x1eaab5;}