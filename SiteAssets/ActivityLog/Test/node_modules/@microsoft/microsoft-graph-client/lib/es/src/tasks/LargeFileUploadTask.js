const a0_0x185440=a0_0x6d97;(function(_0x20bd62,_0x431d5d){const _0x134c01=a0_0x6d97,_0xa974d6=_0x20bd62();while(!![]){try{const _0x3abe13=parseInt(_0x134c01(0x1e8))/0x1+-parseInt(_0x134c01(0x1fb))/0x2+parseInt(_0x134c01(0x1f7))/0x3*(-parseInt(_0x134c01(0x1eb))/0x4)+parseInt(_0x134c01(0x215))/0x5*(-parseInt(_0x134c01(0x1e0))/0x6)+parseInt(_0x134c01(0x1fe))/0x7*(parseInt(_0x134c01(0x213))/0x8)+parseInt(_0x134c01(0x209))/0x9*(parseInt(_0x134c01(0x20d))/0xa)+parseInt(_0x134c01(0x1e1))/0xb*(parseInt(_0x134c01(0x212))/0xc);if(_0x3abe13===_0x431d5d)break;else _0xa974d6['push'](_0xa974d6['shift']());}catch(_0x8a81c4){_0xa974d6['push'](_0xa974d6['shift']());}}}(a0_0x20e5,0x4f734));import{__awaiter}from'tslib';function a0_0x20e5(){const _0x540340=['headers','extraCallbackParam','get','getStatus','uploadSlice','upload','522VbEWYO','4473689UcMRhh','Invalid\x20Session','nextRange','uploadSliceGetRawResponse','rangeSize','cancel','createUploadSession','90572tIzUqE','maxValue','progress','12dohmaR','isNaN','expiry','client','application/octet-stream','warn','getNextRange','isCancelled','updateTaskStatus','size','Please\x20pass\x20the\x20FileUpload\x20object,\x20StreamUpload\x20object\x20or\x20any\x20custom\x20implementation\x20of\x20the\x20FileObject\x20interface','status','278508IefWjc','bytes\x20','split','The\x20LargeFileUploadTask.sliceFile()\x20function\x20has\x20been\x20deprecated\x20and\x20moved\x20into\x20the\x20FileObject\x20interface.','74120BYOPnb','ExpirationDateTime','nextExpectedRanges','28VMWNIQ','CreateUploadResult','sliceFile','DEFAULT_FILE_SIZE','parseRange','url','api','responseType','put','RAW','uploadSession','54BPCLPI','Task\x20with\x20which\x20you\x20are\x20trying\x20to\x20upload\x20is\x20already\x20completed,\x20Please\x20check\x20for\x20your\x20uploaded\x20file','slice','file','659580wBlMbU','content','options','reportProgress','post','12uIWAMP','454520nGUjdk','minValue','27545FSmEZb','expirationDateTime','uploadUrl','delete','getUploadSession'];a0_0x20e5=function(){return _0x540340;};return a0_0x20e5();}import{GraphClientError}from'../GraphClientError';import{GraphResponseHandler}from'../GraphResponseHandler';import{ResponseType}from'../ResponseType';import{Range}from'./FileUploadTask/Range';import{UploadResult}from'./FileUploadTask/UploadResult';function a0_0x6d97(_0x29dabc,_0x2a134a){const _0x20e5e9=a0_0x20e5();return a0_0x6d97=function(_0x6d979d,_0x5cf7a9){_0x6d979d=_0x6d979d-0x1d9;let _0x53d006=_0x20e5e9[_0x6d979d];return _0x53d006;},a0_0x6d97(_0x29dabc,_0x2a134a);}export class LargeFileUploadTask{static[a0_0x185440(0x1e7)](_0x2e0e92,_0x4f5c40,_0x33ff2b,_0x21cfb7={}){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x506b1a=a0_0x6d97,_0x46ff46=yield _0x2e0e92['api'](_0x4f5c40)['headers'](_0x21cfb7)[_0x506b1a(0x211)](_0x33ff2b),_0x1e3912={'url':_0x46ff46[_0x506b1a(0x217)],'expiry':new Date(_0x46ff46[_0x506b1a(0x216)]),'isCancelled':![]};return _0x1e3912;});}constructor(_0x595453,_0x5af3f1,_0x2f40f6,_0x26729e={}){const _0x40d1ee=a0_0x185440;this[_0x40d1ee(0x201)]=0x5*0x400*0x400,this[_0x40d1ee(0x1ee)]=_0x595453;if(!_0x5af3f1['sliceFile'])throw new GraphClientError(_0x40d1ee(0x1f5));else this[_0x40d1ee(0x20c)]=_0x5af3f1;this[_0x40d1ee(0x20c)]=_0x5af3f1,!_0x26729e[_0x40d1ee(0x1e5)]&&(_0x26729e[_0x40d1ee(0x1e5)]=this[_0x40d1ee(0x201)]),this['options']=_0x26729e,this[_0x40d1ee(0x208)]=_0x2f40f6,this[_0x40d1ee(0x1e3)]=new Range(0x0,this[_0x40d1ee(0x20f)][_0x40d1ee(0x1e5)]-0x1);}[a0_0x185440(0x202)](_0x53d0f7){const _0x2cff3d=a0_0x185440,_0x56b6c5=_0x53d0f7[0x0];if(typeof _0x56b6c5==='undefined'||_0x56b6c5==='')return new Range();const _0x20529d=_0x56b6c5[_0x2cff3d(0x1f9)]('-'),_0x48f028=parseInt(_0x20529d[0x0],0xa);let _0x3e6bb3=parseInt(_0x20529d[0x1],0xa);return Number[_0x2cff3d(0x1ec)](_0x3e6bb3)&&(_0x3e6bb3=this['file'][_0x2cff3d(0x1f4)]-0x1),new Range(_0x48f028,_0x3e6bb3);}[a0_0x185440(0x1f3)](_0x9083c6){const _0x31dd1c=a0_0x185440;this['uploadSession'][_0x31dd1c(0x1ed)]=new Date(_0x9083c6[_0x31dd1c(0x216)]),this[_0x31dd1c(0x1e3)]=this[_0x31dd1c(0x202)](_0x9083c6[_0x31dd1c(0x1fd)]);}[a0_0x185440(0x1f1)](){const _0x5d05d4=a0_0x185440;if(this[_0x5d05d4(0x1e3)][_0x5d05d4(0x214)]===-0x1)return this[_0x5d05d4(0x1e3)];const _0x581402=this[_0x5d05d4(0x1e3)][_0x5d05d4(0x214)];let _0x2f6679=_0x581402+this[_0x5d05d4(0x20f)][_0x5d05d4(0x1e5)]-0x1;return _0x2f6679>=this[_0x5d05d4(0x20c)][_0x5d05d4(0x1f4)]&&(_0x2f6679=this[_0x5d05d4(0x20c)][_0x5d05d4(0x1f4)]-0x1),new Range(_0x581402,_0x2f6679);}[a0_0x185440(0x200)](_0x2e010d){const _0x330c46=a0_0x185440;console[_0x330c46(0x1f0)](_0x330c46(0x1fa));if(this['file'][_0x330c46(0x20e)]instanceof ArrayBuffer||this[_0x330c46(0x20c)]['content']instanceof Blob||this[_0x330c46(0x20c)][_0x330c46(0x20e)]instanceof Uint8Array)return this[_0x330c46(0x20c)][_0x330c46(0x20e)][_0x330c46(0x20b)](_0x2e010d['minValue'],_0x2e010d[_0x330c46(0x1e9)]+0x1);throw new GraphClientError('The\x20LargeFileUploadTask.sliceFile()\x20function\x20expects\x20only\x20Blob,\x20ArrayBuffer\x20or\x20Uint8Array\x20file\x20content.\x20Please\x20note\x20that\x20the\x20sliceFile()\x20function\x20is\x20deprecated.');}[a0_0x185440(0x1df)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4a30ec=a0_0x6d97,_0x47dada=this[_0x4a30ec(0x20f)]&&this['options']['uploadEventHandlers'];while(!this['uploadSession'][_0x4a30ec(0x1f2)]){const _0x52f3b6=this['getNextRange']();if(_0x52f3b6['maxValue']===-0x1){const _0x26c170=new Error(_0x4a30ec(0x20a));_0x26c170['name']=_0x4a30ec(0x1e2);throw _0x26c170;}const _0x42395e=yield this[_0x4a30ec(0x20c)][_0x4a30ec(0x200)](_0x52f3b6),_0x1a7716=yield this[_0x4a30ec(0x1e4)](_0x42395e,_0x52f3b6,this[_0x4a30ec(0x20c)][_0x4a30ec(0x1f4)]);if(!_0x1a7716)throw new GraphClientError('Something\x20went\x20wrong!\x20Large\x20file\x20upload\x20slice\x20response\x20is\x20null.');const _0x1ec9ca=yield GraphResponseHandler['getResponse'](_0x1a7716);if(_0x1a7716[_0x4a30ec(0x1f6)]===0xc9||_0x1a7716['status']===0xc8&&_0x1ec9ca['id'])return this[_0x4a30ec(0x210)](_0x47dada,_0x52f3b6),UploadResult[_0x4a30ec(0x1ff)](_0x1ec9ca,_0x1a7716[_0x4a30ec(0x1da)]);const _0x40e1f9={'expirationDateTime':_0x1ec9ca[_0x4a30ec(0x216)]||_0x1ec9ca[_0x4a30ec(0x1fc)],'nextExpectedRanges':_0x1ec9ca['NextExpectedRanges']||_0x1ec9ca[_0x4a30ec(0x1fd)]};this['updateTaskStatus'](_0x40e1f9),this['reportProgress'](_0x47dada,_0x52f3b6);}});}[a0_0x185440(0x210)](_0x21a2ab,_0x5ef96c){const _0x5c5383=a0_0x185440;_0x21a2ab&&_0x21a2ab[_0x5c5383(0x1ea)]&&_0x21a2ab[_0x5c5383(0x1ea)](_0x5ef96c,_0x21a2ab[_0x5c5383(0x1db)]);}[a0_0x185440(0x1de)](_0x5a7021,_0x3c4a3e,_0x2795c8){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x290936=a0_0x6d97;return yield this['client'][_0x290936(0x204)](this['uploadSession'][_0x290936(0x203)])['headers']({'Content-Length':''+(_0x3c4a3e['maxValue']-_0x3c4a3e[_0x290936(0x214)]+0x1),'Content-Range':'bytes\x20'+_0x3c4a3e[_0x290936(0x214)]+'-'+_0x3c4a3e['maxValue']+'/'+_0x2795c8,'Content-Type':_0x290936(0x1ef)})[_0x290936(0x206)](_0x5a7021);});}[a0_0x185440(0x1e4)](_0x56d8c5,_0x59e147,_0x5a592e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x19abaf=a0_0x6d97;return yield this[_0x19abaf(0x1ee)][_0x19abaf(0x204)](this[_0x19abaf(0x208)][_0x19abaf(0x203)])[_0x19abaf(0x1da)]({'Content-Length':''+(_0x59e147[_0x19abaf(0x1e9)]-_0x59e147[_0x19abaf(0x214)]+0x1),'Content-Range':_0x19abaf(0x1f8)+_0x59e147['minValue']+'-'+_0x59e147[_0x19abaf(0x1e9)]+'/'+_0x5a592e,'Content-Type':_0x19abaf(0x1ef)})[_0x19abaf(0x205)](ResponseType[_0x19abaf(0x207)])[_0x19abaf(0x206)](_0x56d8c5);});}[a0_0x185440(0x1e6)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x355f36=a0_0x6d97,_0x5e07c8=yield this[_0x355f36(0x1ee)][_0x355f36(0x204)](this[_0x355f36(0x208)][_0x355f36(0x203)])[_0x355f36(0x205)](ResponseType['RAW'])[_0x355f36(0x218)]();return _0x5e07c8[_0x355f36(0x1f6)]===0xcc&&(this[_0x355f36(0x208)]['isCancelled']=!![]),_0x5e07c8;});}[a0_0x185440(0x1dd)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x9801b4=a0_0x6d97,_0x44a679=yield this[_0x9801b4(0x1ee)][_0x9801b4(0x204)](this[_0x9801b4(0x208)][_0x9801b4(0x203)])[_0x9801b4(0x1dc)]();return this[_0x9801b4(0x1f3)](_0x44a679),_0x44a679;});}['resume'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x55dc7f=a0_0x6d97;return yield this['getStatus'](),yield this[_0x55dc7f(0x1df)]();});}[a0_0x185440(0x1d9)](){const _0x4ddb3d=a0_0x185440;return this[_0x4ddb3d(0x208)];}}