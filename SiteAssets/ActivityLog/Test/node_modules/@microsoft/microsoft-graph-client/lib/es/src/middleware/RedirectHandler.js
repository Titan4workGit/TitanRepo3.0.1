const a0_0x48cee1=a0_0x274c;(function(_0x22ad0e,_0x3fe86b){const _0x235503=a0_0x274c,_0x2a2ff3=_0x22ad0e();while(!![]){try{const _0x25a38e=-parseInt(_0x235503(0x1b4))/0x1+parseInt(_0x235503(0x1a6))/0x2*(parseInt(_0x235503(0x1bc))/0x3)+-parseInt(_0x235503(0x1a7))/0x4+-parseInt(_0x235503(0x1a8))/0x5+-parseInt(_0x235503(0x1c1))/0x6+parseInt(_0x235503(0x1a1))/0x7+parseInt(_0x235503(0x1b0))/0x8*(parseInt(_0x235503(0x1c2))/0x9);if(_0x25a38e===_0x3fe86b)break;else _0x2a2ff3['push'](_0x2a2ff3['shift']());}catch(_0x5ff6d8){_0x2a2ff3['push'](_0x2a2ff3['shift']());}}}(a0_0x168e,0x488d9));import{__awaiter}from'tslib';function a0_0x274c(_0x3bba49,_0x4adda5){const _0x168ec1=a0_0x168e();return a0_0x274c=function(_0x274c69,_0xa3ff40){_0x274c69=_0x274c69-0x196;let _0x9b223e=_0x168ec1[_0x274c69];return _0x9b223e;},a0_0x274c(_0x3bba49,_0x4adda5);}import{RequestMethod}from'../RequestMethod';import{MiddlewareControl}from'./MiddlewareControl';import{cloneRequestWithNewUrl}from'./MiddlewareUtil';import{RedirectHandlerOptions}from'./options/RedirectHandlerOptions';function a0_0x168e(){const _0x43528d=['middlewareControl','getLocationHeader','request','isRelativeURL','://','2481549nrAMHX','AUTHORIZATION_HEADER','executeWithRedirect','get','method','2itotsA','2134164sNMVnj','2897045CIcrMU','nextMiddleware','hasLocationHeader','MANUAL_REDIRECT','undefined','headers','redirect','response','10470312ZdaXvB','indexOf','getMiddlewareOptions','LOCATION_HEADER','329271rIZWSR','Location','status','assign','exec','execute','shouldRedirect','Authorization','395343hDhkDX','updateRequestUrl','updateFeatureUsageFlag','REDIRECT_HANDLER_ENABLED','isRedirect','334074oCBYIl','9yrkNkY','options','STATUS_CODE_SEE_OTHER','string','body','shouldDropAuthorizationHeader','has','getOptions','manual','REDIRECT_STATUS_CODES'];a0_0x168e=function(){return _0x43528d;};return a0_0x168e();}import{FeatureUsageFlag,TelemetryHandlerOptions}from'./options/TelemetryHandlerOptions';export class RedirectHandler{constructor(_0x306a50=new RedirectHandlerOptions()){const _0x53785f=a0_0x274c;this[_0x53785f(0x1c3)]=_0x306a50;}[a0_0x48cee1(0x1c0)](_0xa5a0c4){const _0x54b425=a0_0x48cee1;return RedirectHandler[_0x54b425(0x19b)][_0x54b425(0x1b1)](_0xa5a0c4[_0x54b425(0x1b6)])!==-0x1;}[a0_0x48cee1(0x1aa)](_0x589f13){const _0x257bf4=a0_0x48cee1;return _0x589f13[_0x257bf4(0x1ad)][_0x257bf4(0x198)](RedirectHandler['LOCATION_HEADER']);}[a0_0x48cee1(0x19d)](_0x2bb544){const _0x20976a=a0_0x48cee1;return _0x2bb544[_0x20976a(0x1ad)][_0x20976a(0x1a4)](RedirectHandler[_0x20976a(0x1b3)]);}[a0_0x48cee1(0x19f)](_0x470bdd){const _0x1cfe19=a0_0x48cee1;return _0x470bdd[_0x1cfe19(0x1b1)](_0x1cfe19(0x1a0))===-0x1;}[a0_0x48cee1(0x197)](_0x549cc9,_0x59aac5){const _0x41d8c4=a0_0x48cee1,_0x216abb=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,_0x42b4c4=_0x216abb[_0x41d8c4(0x1b8)](_0x549cc9);let _0x58ff40,_0x359489;_0x42b4c4!==null&&(_0x58ff40=_0x42b4c4[0x0]);const _0x254714=_0x216abb[_0x41d8c4(0x1b8)](_0x59aac5);return _0x254714!==null&&(_0x359489=_0x254714[0x0]),typeof _0x58ff40!==_0x41d8c4(0x1ac)&&typeof _0x359489!==_0x41d8c4(0x1ac)&&_0x58ff40!==_0x359489;}[a0_0x48cee1(0x1bd)](_0x1ba933,_0xdeeccc){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5d8e88=a0_0x274c;_0xdeeccc['request']=typeof _0xdeeccc[_0x5d8e88(0x19e)]===_0x5d8e88(0x1c5)?_0x1ba933:yield cloneRequestWithNewUrl(_0x1ba933,_0xdeeccc['request']);});}[a0_0x48cee1(0x199)](_0x14f55f){const _0x2509ec=a0_0x48cee1;let _0x4d04d2;return _0x14f55f[_0x2509ec(0x19c)]instanceof MiddlewareControl&&(_0x4d04d2=_0x14f55f[_0x2509ec(0x19c)][_0x2509ec(0x1b2)](RedirectHandlerOptions)),typeof _0x4d04d2===_0x2509ec(0x1ac)&&(_0x4d04d2=Object[_0x2509ec(0x1b7)](new RedirectHandlerOptions(),this['options'])),_0x4d04d2;}[a0_0x48cee1(0x1a3)](_0x699630,_0x1ac03e,_0x37a8b7){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x50dfe=a0_0x274c;yield this['nextMiddleware']['execute'](_0x699630);const _0x592e01=_0x699630[_0x50dfe(0x1af)];if(_0x1ac03e<_0x37a8b7['maxRedirects']&&this[_0x50dfe(0x1c0)](_0x592e01)&&this['hasLocationHeader'](_0x592e01)&&_0x37a8b7[_0x50dfe(0x1ba)](_0x592e01)){++_0x1ac03e;if(_0x592e01['status']===RedirectHandler['STATUS_CODE_SEE_OTHER'])_0x699630[_0x50dfe(0x1c3)][_0x50dfe(0x1a5)]=RequestMethod['GET'],delete _0x699630['options'][_0x50dfe(0x196)];else{const _0x539a1e=this[_0x50dfe(0x19d)](_0x592e01);!this[_0x50dfe(0x19f)](_0x539a1e)&&this['shouldDropAuthorizationHeader'](_0x592e01['url'],_0x539a1e)&&delete _0x699630[_0x50dfe(0x1c3)][_0x50dfe(0x1ad)][RedirectHandler[_0x50dfe(0x1a2)]],yield this[_0x50dfe(0x1bd)](_0x539a1e,_0x699630);}yield this[_0x50dfe(0x1a3)](_0x699630,_0x1ac03e,_0x37a8b7);}else return;});}[a0_0x48cee1(0x1b9)](_0x1990d2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x147213=a0_0x274c,_0x1d26cc=0x0,_0x213cfa=this[_0x147213(0x199)](_0x1990d2);return _0x1990d2[_0x147213(0x1c3)][_0x147213(0x1ae)]=RedirectHandler[_0x147213(0x1ab)],TelemetryHandlerOptions[_0x147213(0x1be)](_0x1990d2,FeatureUsageFlag[_0x147213(0x1bf)]),yield this[_0x147213(0x1a3)](_0x1990d2,_0x1d26cc,_0x213cfa);});}['setNext'](_0x2e336f){const _0x27b0bc=a0_0x48cee1;this[_0x27b0bc(0x1a9)]=_0x2e336f;}}RedirectHandler[a0_0x48cee1(0x19b)]=[0x12d,0x12e,0x12f,0x133,0x134],RedirectHandler[a0_0x48cee1(0x1c4)]=0x12f,RedirectHandler['LOCATION_HEADER']=a0_0x48cee1(0x1b5),RedirectHandler[a0_0x48cee1(0x1a2)]=a0_0x48cee1(0x1bb),RedirectHandler[a0_0x48cee1(0x1ab)]=a0_0x48cee1(0x19a);