const a0_0x1e1910=a0_0x3c25;(function(_0x1a9442,_0x1c2b20){const _0x3a2699=a0_0x3c25,_0x113cdd=_0x1a9442();while(!![]){try{const _0x4326d9=-parseInt(_0x3a2699(0x1df))/0x1*(-parseInt(_0x3a2699(0x1da))/0x2)+-parseInt(_0x3a2699(0x1d9))/0x3*(parseInt(_0x3a2699(0x1e2))/0x4)+-parseInt(_0x3a2699(0x1e5))/0x5*(-parseInt(_0x3a2699(0x1cd))/0x6)+-parseInt(_0x3a2699(0x1cf))/0x7*(parseInt(_0x3a2699(0x1e1))/0x8)+parseInt(_0x3a2699(0x1d6))/0x9+parseInt(_0x3a2699(0x1e3))/0xa*(parseInt(_0x3a2699(0x1d5))/0xb)+-parseInt(_0x3a2699(0x1d3))/0xc*(-parseInt(_0x3a2699(0x1dd))/0xd);if(_0x4326d9===_0x1c2b20)break;else _0x113cdd['push'](_0x113cdd['shift']());}catch(_0x5115c2){_0x113cdd['push'](_0x113cdd['shift']());}}}(a0_0x4c1c,0x880f7));import{__awaiter}from'tslib';function a0_0x3c25(_0x15b6d3,_0x1667ee){const _0x4c1cd8=a0_0x4c1c();return a0_0x3c25=function(_0x3c252c,_0x5e2ee7){_0x3c252c=_0x3c252c-0x1cd;let _0x513e9e=_0x4c1cd8[_0x3c252c];return _0x513e9e;},a0_0x3c25(_0x15b6d3,_0x1667ee);}function a0_0x4c1c(){const _0x4789ff=['read','Stream\x20ended\x20before\x20reading\x20required\x20range\x20size','slice','12kqoEFP','fileSlice','5739437NXEduZ','1815192EieFKd','minValue','maxValue','488778NInezf','24506AlDyJr','sliceFile','Error\x20encountered\x20while\x20reading\x20the\x20stream\x20during\x20the\x20upload','6424743ZqqTAL','readable','39NEHBtx','range','872CZtiTv','12hrkElM','10YmPlCb','readableLength','205315beezfz','previousSlice','readNBytesFromStream','concat','content','6jaACbH','push','44345iSzRjb'];a0_0x4c1c=function(){return _0x4789ff;};return a0_0x4c1c();}import{GraphClientError}from'../../../GraphClientError';export class StreamUpload{constructor(_0x4d9ddb,_0x4819f1,_0x1261d1){this['content']=_0x4d9ddb,this['name']=_0x4819f1,this['size']=_0x1261d1;if(!_0x4d9ddb||!_0x4819f1||!_0x1261d1)throw new GraphClientError('Please\x20provide\x20the\x20Readable\x20Stream\x20content,\x20name\x20of\x20the\x20file\x20and\x20size\x20of\x20the\x20file');}[a0_0x1e1910(0x1db)](_0x122ba6){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x33a3a8=a0_0x3c25;let _0x3e0907=_0x122ba6['maxValue']-_0x122ba6['minValue']+0x1;const _0x188e98=[];if(this[_0x33a3a8(0x1e6)]){if(_0x122ba6[_0x33a3a8(0x1d7)]<this['previousSlice'][_0x33a3a8(0x1e0)][_0x33a3a8(0x1d7)])throw new GraphClientError('An\x20error\x20occurred\x20while\x20uploading\x20the\x20stream.\x20Please\x20restart\x20the\x20stream\x20upload\x20from\x20the\x20first\x20byte\x20of\x20the\x20file.');if(_0x122ba6[_0x33a3a8(0x1d7)]<this[_0x33a3a8(0x1e6)]['range']['maxValue']){const _0x11e8f9=this['previousSlice'][_0x33a3a8(0x1e0)]['minValue'],_0x2f7081=this[_0x33a3a8(0x1e6)][_0x33a3a8(0x1e0)][_0x33a3a8(0x1d8)];if(_0x122ba6[_0x33a3a8(0x1d7)]===_0x11e8f9&&_0x122ba6[_0x33a3a8(0x1d8)]===_0x2f7081)return this[_0x33a3a8(0x1e6)][_0x33a3a8(0x1d4)];if(_0x122ba6[_0x33a3a8(0x1d8)]===_0x2f7081)return this['previousSlice'][_0x33a3a8(0x1d4)][_0x33a3a8(0x1d2)](_0x122ba6[_0x33a3a8(0x1d7)],_0x122ba6[_0x33a3a8(0x1d8)]+0x1);_0x188e98['push'](this[_0x33a3a8(0x1e6)][_0x33a3a8(0x1d4)][_0x33a3a8(0x1d2)](_0x122ba6[_0x33a3a8(0x1d7)],_0x2f7081+0x1)),_0x3e0907=_0x122ba6[_0x33a3a8(0x1d8)]-_0x2f7081;}}if(this[_0x33a3a8(0x1e9)]&&this['content'][_0x33a3a8(0x1de)])this['content'][_0x33a3a8(0x1e4)]>=_0x3e0907?_0x188e98[_0x33a3a8(0x1ce)](this[_0x33a3a8(0x1e9)][_0x33a3a8(0x1d0)](_0x3e0907)):_0x188e98[_0x33a3a8(0x1ce)](yield this[_0x33a3a8(0x1e7)](_0x3e0907));else throw new GraphClientError('Stream\x20is\x20not\x20readable.');const _0xdffcdc=Buffer[_0x33a3a8(0x1e8)](_0x188e98);return this[_0x33a3a8(0x1e6)]={'fileSlice':_0xdffcdc,'range':_0x122ba6},_0xdffcdc;});}[a0_0x1e1910(0x1e7)](_0x4f8073){return new Promise((_0x11e633,_0x151ae7)=>{const _0x2a198a=a0_0x3c25,_0xffbce9=[];let _0x1c8919=_0x4f8073,_0x1ae152=0x0;this[_0x2a198a(0x1e9)]['on']('end',()=>{const _0x2e2076=_0x2a198a;if(_0x1c8919>0x0)return _0x151ae7(new GraphClientError(_0x2e2076(0x1d1)));}),this['content']['on'](_0x2a198a(0x1de),()=>{const _0x5006b3=_0x2a198a;let _0x2872bf;while(_0x1ae152<_0x4f8073&&(_0x2872bf=this[_0x5006b3(0x1e9)][_0x5006b3(0x1d0)](_0x1c8919))!==null){_0x1ae152+=_0x2872bf['length'],_0xffbce9[_0x5006b3(0x1ce)](_0x2872bf),_0x1c8919>0x0&&(_0x1c8919=_0x4f8073-_0x1ae152);}if(_0x1ae152===_0x4f8073)return _0x11e633(Buffer[_0x5006b3(0x1e8)](_0xffbce9));if(!this[_0x5006b3(0x1e9)]||!this[_0x5006b3(0x1e9)]['readable'])return _0x151ae7(new GraphClientError(_0x5006b3(0x1dc)));});});}}